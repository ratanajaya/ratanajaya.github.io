{"version":3,"file":"static/js/180.8af2fec4.chunk.js","mappings":"mHAGMA,EAAiB,CACrBC,qBAAsB,SAACC,GAA+B,OACpDC,EAAAA,EAAAA,IAAuB,mCAAoC,CAAED,OAAAA,GAAS,EACxEE,gBAAiB,SAACC,GAA2B,OAC3CF,EAAAA,EAAAA,KAAsC,8BAA+BE,EAAM,EAC7EC,sBAAuB,kBACrBH,EAAAA,EAAAA,IAA8B,oCAAoC,GAGtE,K,oLCHMI,GAAcC,EAAAA,EAAAA,IAAOC,EAAAA,EAAPD,EAAc,SAAAE,GAAA,IAAGC,EAAKD,EAALC,MAAK,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACrCD,EAAME,WAAWC,OAAK,IACzBC,UAAW,OACXC,MAAOL,EAAMM,QAAQC,KAAKC,UAC1BC,QAAQ,sBACRC,YAAa,QAAM,IAGfC,EAAiB,SAACC,GAAa,SAAAC,OAAQD,EAAK,EAE5CE,EAAiB,SAACC,GAEtB,OAAOA,CACT,EAEe,SAASC,IACtB,IAAAC,GAA8BC,EAAAA,EAAAA,WAAkB,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/CI,EAAOF,EAAA,GAEdG,GAF0BH,EAAA,IAEQD,EAAAA,EAAAA,UAA6B,KAAGK,GAAAH,EAAAA,EAAAA,GAAAE,EAAA,GAA3DE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAU9B,OARAG,EAAAA,EAAAA,YAAU,WACRrC,EAAAA,EAAAA,wBACGsC,MAAK,SAAAC,GACJH,EAAaG,EACf,IACCC,OAAM,WAAO,GAClB,GAAE,KAGAC,EAAAA,EAAAA,KAACC,EAAAA,EAAQ,CAACC,MAAM,UAAUX,QAASA,EAAQY,SACxCT,EAAUU,KAAI,SAAAC,GACb,IAAMC,EAAaD,EAAGE,eAAeH,KAAI,SAAAI,GAAG,MAAK,CAC/CC,KAAMD,EAAIC,KACVC,KAAMF,EAAIE,KACX,IAEKC,EAAS,CACb,CAAEF,KAAMJ,EAAGI,KAAMC,KAAML,EAAGK,OAAM3B,QAAA6B,EAAAA,EAAAA,GAC7BN,IAGCO,EAAS,IAA0B,GAAnBF,EAAUG,OAMhC,OAJAC,QAAQC,IAAI,UAAWL,EAAUG,QACjCC,QAAQC,IAAI,aAAcH,IAIxBI,EAAAA,EAAAA,MAAA,OAAAd,SAAA,EACEH,EAAAA,EAAAA,KAACkB,EAAAA,EAAQ,CACPC,QAASR,EACTS,MAAO,CAAC,CACNC,UAAW,OACXC,QAAS,OACTC,eAAevC,IAEjBwC,MAAO,CAAC,CAACvC,MAAM,GAAIwC,KAAK,EAAGC,IAAI,IAC/BC,OAAQ,CAAC,CACPL,QAAS,OACTrC,MAAOoB,EAAGI,KACVc,eAAgB1C,EAChB+C,eAAgB,CACdC,YAAa,OACbC,MAAO,YAGXC,OAAO,aACPlB,OAAS,IAA0B,GAAnBF,EAAUG,SAG3BT,EAAG2B,QAAQ5B,KAAI,SAAA6B,GAAC,OACfhB,EAAAA,EAAAA,MAACnD,EAAW,CAACoE,UAAW,EAAE/B,SAAA,EACxBH,EAAAA,EAAAA,KAAA,OACEmC,MAAO,CACLC,SAAS,WACTC,OAAO,IACPC,UAAU,QACVC,WAAW,OACXC,SAAS,QACTrC,UAEFH,EAAAA,EAAAA,KAAA,QAAMmC,MAAO,CAACM,WAAW,KAAKtC,SAC3BuC,EAAAA,EAAAA,oBAAyBT,EAAEU,YAG/BV,EAAEW,SACS,MAItB,KAGN,C,2GClGe,SAAS3C,EAAS4C,GAK/B,OACE5B,EAAAA,EAAAA,MAAA,OAAAd,SAAA,EACEc,EAAAA,EAAAA,MAAC6B,EAAAA,EAAS,CAAA3C,SAAA,EACRH,EAAAA,EAAAA,KAAA,OAAK+C,UAAU,gBACf/C,EAAAA,EAAAA,KAAA,OAAK+C,UAAU,gBACf/C,EAAAA,EAAAA,KAACgD,EAAAA,EAAU,CAACC,QAAQ,KAAI9C,SAAE0C,EAAM3C,SAChCF,EAAAA,EAAAA,KAAA,OAAK+C,UAAU,eACdF,EAAM1C,aAETH,EAAAA,EAAAA,KAACkD,EAAAA,EAAY,CAACC,KAAMN,EAAMtD,YAGhC,C","sources":["common/api/apiTransaction.ts","pages/Summary/index.tsx","pages/_layouts/PageBase.tsx"],"sourcesContent":["import { DailyWish, DailyWishInsertModel, DailyWishSummary, ResponseResult } from 'common/types';\r\nimport { instanceWithBearer as axios } from \"common/axios\";\r\n\r\nconst apiTransaction = {\r\n  getDailyWishesByDate: (params: { date: string | null }) => \r\n    axios.get<DailyWish[]>('Transaction/GetDailyWishesByDate', { params }),\r\n  insertDailyWish: (param: DailyWishInsertModel) => \r\n    axios.post<ResponseResult<DailyWish>>('Transaction/InsertDailyWish', param),\r\n  getDailyWishSummaries: () => \r\n    axios.get<DailyWishSummary[]>('Transaction/GetDailyWishSummaries')\r\n};\r\n\r\nexport default apiTransaction;","import apiTransaction from 'common/api/apiTransaction';\r\nimport { DailyWishSummary } from 'common/types';\r\nimport PageBase from 'pages/_layouts/PageBase';\r\nimport { BarChart } from '@mui/x-charts/BarChart';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Alert, AlertTitle, Paper, styled } from '@mui/material';\r\nimport util from 'common/util';\r\nimport { HighlightScope } from '@mui/x-charts';\r\n\r\nconst StyledPaper = styled(Paper)(({ theme }) => ({\r\n  ...theme.typography.body2,\r\n  textAlign: 'left',\r\n  color: theme.palette.text.secondary,\r\n  padding:'16px 16px 16px 24px',\r\n  marginRight: '46px'\r\n}));\r\n\r\nconst blandFormatter = (value: number) => `${value}`;\r\n\r\nconst labelFormatter = (label: string) => {\r\n  //label length cannot be cut because it's being used as key by BarChart\r\n  return label; //label.length <= 6 ? label : `${label.substring(0, 5)}..`\r\n}\r\n\r\nexport default function Summary() {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  const [summaries, setSummaries] = useState<DailyWishSummary[]>([]);\r\n\r\n  useEffect(() => {\r\n    apiTransaction.getDailyWishSummaries()\r\n      .then(res => {\r\n        setSummaries(res);\r\n      })\r\n      .catch(() => {});\r\n  },[]);\r\n  \r\n  return (\r\n    <PageBase title='Summary' loading={loading}>\r\n      {summaries.map(dw => {\r\n        const dswDataSet = dw.dailySubWishes.map(dsw => ({\r\n          name: dsw.name,\r\n          mean: dsw.mean\r\n        }));\r\n\r\n        const dwDataset = [\r\n          { name: dw.name, mean: dw.mean },\r\n          ...dswDataSet\r\n        ]\r\n\r\n        const height = 150 + (dwDataset.length * 20);\r\n\r\n        console.log('len is ', dwDataset.length);\r\n        console.log('height is ', height);\r\n\r\n\r\n        return(\r\n          <div>\r\n            <BarChart\r\n              dataset={dwDataset}\r\n              yAxis={[{ \r\n                scaleType: 'band', \r\n                dataKey: 'name', \r\n                valueFormatter:labelFormatter \r\n              }]}\r\n              xAxis={[{label:'', min:-5, max:5}]}\r\n              series={[{ \r\n                dataKey: 'mean', \r\n                label: dw.name, \r\n                valueFormatter: blandFormatter,\r\n                highlightScope: {\r\n                  highlighted: 'item',\r\n                  faded: 'global',\r\n                } as HighlightScope\r\n              }]}\r\n              layout=\"horizontal\"\r\n              height={ 150 + (dwDataset.length * 20) }\r\n              //tooltip={{ trigger: 'axis' }}\r\n            />\r\n            {dw.remarks.map(a => (\r\n              <StyledPaper elevation={3}>\r\n                <div \r\n                  style={{\r\n                    position:'absolute',\r\n                    zIndex:'1',\r\n                    marginTop:'-24px',\r\n                    marginLeft:'-8px',\r\n                    fontSize:'12px'\r\n                  }}\r\n                >\r\n                  <span style={{fontWeight:200}}>\r\n                    {util.formatFriendlyDate2(a.pkDate)}\r\n                  </span>\r\n                </div>\r\n                {a.remark}\r\n              </StyledPaper>\r\n            ))}\r\n          </div>\r\n        );\r\n      })}\r\n    </PageBase>\r\n  )\r\n}\r\n","import { Container, Typography } from '@mui/material'\r\nimport React from 'react'\r\nimport SpinBackdrop from 'components/SpinBackdrop'\r\n\r\nexport default function PageBase(props: {\r\n  loading: boolean,\r\n  title: string,\r\n  children: React.ReactNode\r\n}) {\r\n  return (\r\n    <div>\r\n      <Container>\r\n        <div className='divider-64'></div>\r\n        <div className='divider-12'></div>\r\n        <Typography variant='h6'>{props.title}</Typography>\r\n        <div className='divider-12'></div>\r\n        {props.children}\r\n      </Container>\r\n      <SpinBackdrop open={props.loading} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":["apiTransaction","getDailyWishesByDate","params","axios","insertDailyWish","param","getDailyWishSummaries","StyledPaper","styled","Paper","_ref","theme","_objectSpread","typography","body2","textAlign","color","palette","text","secondary","padding","marginRight","blandFormatter","value","concat","labelFormatter","label","Summary","_useState","useState","_useState2","_slicedToArray","loading","_useState3","_useState4","summaries","setSummaries","useEffect","then","res","catch","_jsx","PageBase","title","children","map","dw","dswDataSet","dailySubWishes","dsw","name","mean","dwDataset","_toConsumableArray","height","length","console","log","_jsxs","BarChart","dataset","yAxis","scaleType","dataKey","valueFormatter","xAxis","min","max","series","highlightScope","highlighted","faded","layout","remarks","a","elevation","style","position","zIndex","marginTop","marginLeft","fontSize","fontWeight","util","pkDate","remark","props","Container","className","Typography","variant","SpinBackdrop","open"],"sourceRoot":""}