(this.webpackJsonpcloudui=this.webpackJsonpcloudui||[]).push([[0],{1021:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(5),c=a.n(r),o=(a(531),a(57)),i=a(26),u=(a(532),a(533),a(74)),s=a(10),m=a(1063),d=a(1071),p=a(1073),f=a(1075),h=a(1069),g=a(52),b=a(1066),E=(a(1083),a(1084)),v=a(1085),y=a(1086),x=a(1087),C=a(1088),O=a(1089),w=a(1090),j=a(1091),P=a(1092),k=a(1093),I=a(451),S=a.n(I),D=a(128),T=a.n(D),N=a(105),A=a(15),R=a(1067),F=a(9),M=a(199),L=a(154);function B(e){return Object(n.useEffect)((function(){e.onVisible()}),[e]),l.a.createElement(l.a.Fragment,null)}var q=function(e){return function(t){var a=Object.assign({},t);return l.a.createElement(e,Object.assign({},a,{popInfo:function(e,t,a){b.a.info({title:e,content:l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t),l.a.createElement("pre",null,a?JSON.stringify(a,null,2):"")),onOk:function(){},width:500})},popError:function(e,t,a){b.a.error({title:e,content:l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,t),l.a.createElement("pre",null,a?JSON.stringify(a,null,2):"")),onOk:function(){},width:500})},popApiError:function(e){if(null!==e.response&&void 0!==e.response){var t=e.response,a=t.status,n=t.statusText,r=t.data,c={title:"".concat(a," - ").concat(n),content:l.a.createElement("span",null,JSON.stringify(r,null,2)),onOk:function(){},width:500};a>=400&&a<500?b.a.warning(c):b.a.error(c)}else b.a.error({title:"No response",content:e.toString(),onOk:function(){},width:500})}}))}};function U(e){return e.charAt(0).toLowerCase()+e.slice(1)}function V(e,t){if(0===t)return 0;var a=e/t*100;return a<=100?a:100}function z(e,t,a){return Math.max(t,Math.min(e,a))}function W(e,t){var a=e.filter((function(e){return null!=e&&""!==e})),n=t||"/",l=new RegExp(n+"{1,}","g");return a.join(n).replace(l,n)}function G(e){return new Date(e).toLocaleString()}var J="https://wkrstorage.file.core.windows.net/library/[libRelPath]?sv=2020-08-04&ss=f&srt=sco&sp=r&se=2023-04-08T01:17:28Z&st=2022-04-07T17:17:28Z&spr=https&sig=%2BdlHr0HKeGENqIjaCXYA%2B1FNdPV7yKVi9ewlvaAhhG0%3D&antiCache=[antiCache]",H="https://wkr.azurewebsites.net/",Y=J,K=J,_="".concat(H,"Main/"),Q="".concat(H,"Sc/"),Z=Y,X=K;function $(e,t){return"".concat(1===e?Q:_).concat(t)}var ee=function(e,t,a,n){var l=void 0!==n?encodeURIComponent(n):"";return $(e,"GetAlbumCardModels?page=".concat(t,"&row=").concat(a,"&query=").concat(l))},te=function(e){return $(e,"GetLibraryDirNodes")},ae=function(e){return $(e,"UpdateAlbumOuterValue")},ne=function(e,t){var a=encodeURIComponent(t);return $(e,"RefreshAlbum?path=".concat(a))},le=function(e,t,a){var n=encodeURIComponent(t);return $(e,"GetAlbumPageInfos?path=".concat(n,"&includeDetail=").concat(null!==a&&void 0!==a&&a))},re=function(e){return $(e,"RescanDatabase")},ce=function(e,t){var a=null!==t&&void 0!==t?t:0,n=encodeURIComponent(e);return Z.replace("[apiBaseUrl]",H).replace("[libRelPath]",n).replace("[type]",a).replace("[antiCache]",(new Date).toISOString())},oe=function(e,t,a){var n=null!==a&&void 0!==a?a:0,l=encodeURIComponent(e);return X.replace("[apiBaseUrl]",H).replace("[libRelPath]",l).replace("[maxSize]",t).replace("[type]",n).replace("[antiCache]",(new Date).toISOString())};function ie(e,t){var a=3===t?{r:34,g:193,b:195}:2===t?{r:142,g:190,b:121}:{r:253,g:187,b:45},n=e>=t?1:0;return"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(n,")")}function ue(e,t){return e>t&&(1===t||2===t)?"2px solid black":"0px"}function se(e,t){return e>=t?"1px solid black":"0px"}function me(e){var t={width:"18px",height:"12px",marginRight:"2px",marginBottom:"2px"};return l.a.createElement(l.a.Fragment,null,"English"===e.language?l.a.createElement(L.a.GB,{style:t}):"Japanese"===e.language?l.a.createElement(L.a.JP,{style:t}):"Chinese"===e.language?l.a.createElement(L.a.CN,{style:t}):l.a.createElement(L.a.ID,{style:t}))}var de=q((function(e){var t={view:function(){e.onView(e.albumCm)},edit:function(){e.onEdit&&e.onEdit(e.albumCm.path)}},a=Object(M.b)({threshold:0,rootMargin:"300px 0px 300px 0px"}),n=Object(s.a)(a,3),r=n[0],c=n[1],o=(n[2],l.a.createElement(B,{onVisible:t.edit}));return l.a.createElement("div",{ref:r,style:{paddingBottom:"8px",position:"relative",textAlign:"center"}},l.a.createElement("div",{style:{height:"150px",width:"100%"}},l.a.createElement(R.a,{overlay:o,trigger:["contextMenu"],disabled:!e.showContextMenu},l.a.createElement("div",{style:{display:"inline-block",position:"relative",height:"150px",width:"100%",maxWidth:"150px",borderLeft:e.albumCm.isRead?"":"1px solid #ddbe14"},onClick:t.view},c?l.a.createElement("img",{style:{objectFit:"contain",height:"100%",width:"100%"},src:oe(e.albumCm.coverInfo.uncPathEncoded,150,e.type),alt:"img"}):null,e.albumCm.isWip?l.a.createElement("div",{style:{position:"absolute",height:0,width:0,left:"0px",top:"0px",lineHeight:0}},l.a.createElement(F.a,{type:"pause-circle",style:{border:"1px solid rgba(108, 108, 108, 0.8)",borderRadius:"50%"}})):"",e.albumCm.isRead?"":l.a.createElement("div",{style:{position:"absolute",height:0,width:0,left:"0px",top:"0px",borderLeft:"15px solid #ddbe14",borderRight:"15px solid transparent",borderBottom:"15px solid transparent"}}),l.a.createElement("div",{style:{position:"absolute",right:"3px",bottom:"3px",color:"white",lineHeight:"0px"}},e.albumCm.languages.map((function(e,t){return l.a.createElement(me,{language:e,key:t})}))),l.a.createElement("div",{style:{position:"absolute",right:"0px",bottom:"0px",height:"100%",width:"3px"}},[3,2,1].map((function(t,a){return l.a.createElement("div",{key:"tierBar-".concat(a),style:{width:"100%",height:"33%",backgroundColor:ie(e.albumCm.tier,t),borderTop:ue(e.albumCm.tier,t),borderRight:se(e.albumCm.tier,t)}})}))),l.a.createElement("div",{style:{position:"absolute",left:"0px",bottom:"0px",width:"100%",height:"3px",backgroundColor:"white",display:e.albumCm.lastPageIndex>0?"block":"none"}},l.a.createElement("div",{style:{backgroundColor:"DodgerBlue",height:"100%",width:"".concat(V(e.albumCm.lastPageIndex+1,e.albumCm.pageCount),"%")}})),null!==e.albumCm.note&&""!==e.albumCm.note?l.a.createElement("div",{className:"album-flag"},e.albumCm.note):"",l.a.createElement("div",null)))),l.a.createElement("span",{style:{fontSize:"12px",lineHeight:1.1,color:"rgba(255,255,255, 0.8)"}},e.albumCm.fullTitle))})),pe=a(429),fe=a(1068),he=a(1076),ge=a(1077),be=a(1078),Ee=a(1079),ve=a(1080),ye=a(1081),xe=a(1065);var Ce=function(e){var t,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){o(e.initialValue)}),[e.initialValue]),l.a.createElement(b.a,{visible:e.visible,footer:null,centered:!0,closable:!1,onCancel:function(){return e.onClose()},style:{maxWidth:300,textAlign:"center"}},l.a.createElement(xe.a.TextArea,{value:c,onChange:function(e){return o(e.target.value)},rows:2}),l.a.createElement(g.a,{style:{width:"100%"},type:"primary",onClick:function(){e.onOk(c,e.initialValue),e.onClose()}},null!==(t=e.btnText)&&void 0!==t?t:"Rename"))},Oe=a(1070),we=a(68).default,je=Oe.a.TreeNode,Pe=Oe.a.DirectoryTree;var ke=q((function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),m=i[0],d=i[1];Object(n.useEffect)((function(){we.get(te(1)).then((function(e){c(e.data)})).catch((function(t){e.popApiError(t)}))}),[]);var p={loadData:function(t){return new Promise((function(a){t.props.childs?a():we.get("".concat(te(1),"?path=").concat(t.props.dataRef.name)).then((function(e){t.props.dataRef.childs=e.data,c((function(e){return Object(u.a)(e)})),a()})).catch((function(t){e.popApiError(t)}))}))},select:function(e){d(e)}};return l.a.createElement(b.a,{visible:e.visible,footer:null,centered:!0,closable:!1,onCancel:function(){return e.onClose()},style:{width:400,maxWidth:"95vh"}},l.a.createElement(Ie,{nodes:r,onLoadData:p.loadData,onSelect:p.select}),l.a.createElement(g.a,{style:{width:"100%"},type:"primary",onClick:function(){e.onOk(m),e.onClose()}},"Move Here"))}));function Ie(e){return l.a.createElement(Pe,{loadData:e.onLoadData,onSelect:function(t){return e.onSelect(t[0])}},function e(t){return t.map((function(t){return t.childs?l.a.createElement(je,{title:t.name,key:t.name,dataRef:t},e(t.childs)):l.a.createElement(je,{title:t.name,key:t.name,dataRef:t})}))}(e.nodes))}var Se=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){c(e.initialValue+1)}),[e.initialValue]);var o=function(t){c(Math.min(Math.max(t,1),e.albumCm.pageCount))},i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),v=E[0],y=E[1],x=Object(n.useState)(0),C=Object(s.a)(x,2),O=C[0],w=C[1];return Object(n.useEffect)((function(){void 0!==e.albumCm&&w(e.albumCm.tier)}),[e.albumCm]),void 0===e.albumCm?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{visible:e.visible,onCancel:e.onCancel,footer:null,closable:!1,centered:!0,style:{maxWidth:300}},l.a.createElement(p.a,null,1!==e.type?l.a.createElement(f.a,{span:24,style:{marginBottom:15,textAlign:"center"}},l.a.createElement(fe.a,{count:3,value:O,onChange:function(t){w(t),e.onTierChange(t)},style:{fontSize:"40px"}})):"",l.a.createElement(f.a,{span:24},l.a.createElement(g.a,{type:"primary",onClick:function(){return e.onRecount()},style:{width:"100%"}},l.a.createElement(he.a,null),"Recount Pages")),l.a.createElement(f.a,{span:12,style:{textAlign:"left",marginTop:5}},l.a.createElement("input",{type:"number",value:r,onChange:function(e){return o(e.target.value)},style:{width:"97%",padding:"4px",WebkitBoxSizing:"border-box",borderRadius:"5px",color:"black"}})),l.a.createElement(f.a,{span:6,style:{textAlign:"left",marginTop:5}},l.a.createElement(g.a,{type:"ghost",style:{width:"97%",color:"white"},onClick:function(){return o(r-1)}},"-")),l.a.createElement(f.a,{span:6,style:{textAlign:"right",marginTop:5}},l.a.createElement(g.a,{type:"ghost",style:{width:"97%",color:"white"},onClick:function(){return o(r+1)}},"+")),l.a.createElement(f.a,{span:24,style:{marginTop:5}},l.a.createElement(g.a,{type:"primary",onClick:function(){return e.onJump(r-1)},style:{width:"100%"}},l.a.createElement(ge.a,null),"Jump")),l.a.createElement(f.a,{span:24,style:{marginTop:5}},l.a.createElement(g.a,{type:"primary",onClick:function(){return e.onUndoJump()},style:{width:"100%"}},l.a.createElement(be.a,null),"Undo Jump")),l.a.createElement(f.a,{span:24,style:{marginTop:5}},l.a.createElement(g.a,{type:"primary",onClick:function(){e.onCancel(),d(!0)},style:{width:"100%"}},l.a.createElement(Ee.a,null),"Rename Page")),1===e.type?l.a.createElement(f.a,{span:24,style:{marginTop:5}},l.a.createElement(g.a,{type:"primary",onClick:function(){e.onCancel(),y(!0)},style:{width:"100%"}},l.a.createElement(ve.a,null),"Move Page")):"",l.a.createElement(f.a,{span:24,style:{marginTop:5}},l.a.createElement(g.a,{type:"danger",onClick:function(){e.onCancel(),e.onDelete()},style:{width:"100%"}},l.a.createElement(ye.a,null),"Delete Page")))),l.a.createElement(Ce,{visible:m,onClose:function(){return d(!1)},initialValue:e.pageName,onOk:e.onRename}),1===e.type?l.a.createElement(ke,{visible:v,onClose:function(){return y(!1)},onOk:e.onMove}):"")},De=a(1082);var Te=function(e){var t,a=null!==(t=e.colSpan)&&void 0!==t?t:{label:6,control:18};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,8]},l.a.createElement(f.a,{span:a.label},l.a.createElement("label",{className:"my-editor-label"},e.label)),l.a.createElement(f.a,{span:a.control},l.a.createElement(fe.a,{count:3,value:e.value,onChange:function(t){e.onChange(e.label,t)}}))))},Ne=a(86),Ae=a(145),Re=a.n(Ae),Fe=b.a.confirm,Me=a(68).default,Le=function(e){return function(t){var a=Object.assign({},t);return l.a.createElement(e,Object.assign({},a,{deletePage:function(e,t,n){Fe({title:"Delete ".concat(e.alRelPath,"?"),icon:l.a.createElement(De.a,null),okText:"\xa0\xa0\xa0YES\xa0\xa0\xa0",okType:"danger",cancelText:"\xa0\xa0\xa0NO\xa0\xa0\xa0",onOk:function(){Me.delete(function(e,t,a){var n=encodeURIComponent(t),l=encodeURIComponent(a);return $(e,"DeleteFile?path=".concat(n,"&alRelPath=").concat(l))}(a.type,e.albumPath,e.alRelPath)).then((function(e){t(e)})).catch((function(e){n(e)}))},onCancel:function(){}})},movePage:function e(t,n,r){var c;Me.post((c=a.type,$(c,"MoveFile")),t).then((function(a){"Destination file already exist"===a.data.message?Fe({title:"Overwrite?",icon:l.a.createElement(De.a,null),content:l.a.createElement(Be,{file1:a.data.srcInfo,file2:a.data.dstInfo}),okText:"\xa0\xa0\xa0YES\xa0\xa0\xa0",okType:"danger",cancelText:"\xa0\xa0\xa0NO\xa0\xa0\xa0",onOk:function(){e(Object(Ne.a)({},t,{overwrite:!0}),n)},onCancel:function(){}}):n(a)})).catch((function(e){r(e)}))}}))}};function Be(e){var t=e.file1,a=e.file2;return l.a.createElement("table",{class:"comparison-table",style:{width:"100%"}},l.a.createElement("tr",null,l.a.createElement("th",null,"Source"),l.a.createElement("th",null,"Destination")),l.a.createElement("tr",null,l.a.createElement("td",null,t.name),l.a.createElement("td",null,a.name)),l.a.createElement("tr",null,l.a.createElement("td",{style:n(t.size,a.size)},(t.size/1024).toFixed(2)," KB"),l.a.createElement("td",{style:n(a.size,t.size)},(a.size/1024).toFixed(2)," KB")),l.a.createElement("tr",null,l.a.createElement("td",{style:n(t.createdDate,a.createdDate)},Re()(t.createdDate).format("YYYY-MM-DD hh:mm")),l.a.createElement("td",{style:n(a.createdDate,t.createdDate)},Re()(a.createdDate).format("YYYY-MM-DD hh:mm"))));function n(e,t){return{fontWeight:e>t?"bold":"normal"}}}var qe=b.a.confirm,Ue=a(68).default;var Ve=Le(q((function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)({visible:!1,initialValue:"",onOk:function(t,a){console.log("rename ok",t,a);var n={overwrite:!1,src:{albumPath:e.albumPath,alRelPath:a},dst:{albumPath:e.albumPath,alRelPath:t}};e.movePage(n,(function(t){c((function(e){var t=e.findIndex((function(e){return e.title===n.src.alRelPath}));return e[t].title=n.dst.alRelPath,Object(u.a)(e)})),e.onChapterRenameSuccess()}),(function(t){e.popApiError(t)}))}}),i=Object(s.a)(o,2),m=i[0],g=i[1],b=function(t){var a;Ue.post((a=e.type,$(a,"UpdateAlbumChapter")),t).then((function(a){c((function(e){var a=e.findIndex((function(e){return e.title===t.chapterName}));return e[a].tier=t.tier,Object(u.a)(e)})),e.onChapterRenameSuccess()})).catch((function(t){e.popApiError(t)}))};Object(n.useEffect)((function(){void 0!==e.albumPath&&Ue.get(function(e,t){var a=encodeURIComponent(t);return $(e,"GetAlbumChapters?path=".concat(a))}(e.type,e.albumPath)).then((function(e){c(e.data)})).catch((function(t){e.popApiError(t)}))}),[e.albumPath]);var E=function(e){g((function(t){return t.visible=!0,t.initialValue=e,Object(A.a)({},t)}))},v=function(t){qe({title:"Delete chapter ".concat(t,"?"),icon:l.a.createElement(De.a,null),okText:"\xa0\xa0\xa0Yes\xa0\xa0\xa0",okType:"danger",cancelText:"\xa0\xa0\xa0No\xa0\xa0\xa0",onOk:function(){Ue.delete(function(e,t,a){var n=encodeURIComponent(t),l=encodeURIComponent(a);return $(e,"DeleteAlbumChapter?path=".concat(n,"&chapterName=").concat(l))}(e.type,e.albumPath,t)).then((function(a){console.log("newPageCount",a.data),e.onChapterDeleteSuccess(a.data),c(r.filter((function(e){return e.title!==t})))})).catch((function(t){e.popApiError(t)}))},onCancel:function(){}})},y=function(t,a){b({albumPath:e.albumPath,chapterName:t,tier:a})};return l.a.createElement(h.a,{placement:"left",closable:!1,onClose:e.onClose,visible:e.visible},l.a.createElement("div",{style:{padding:"10px"}},r.map((function(t,a){return l.a.createElement(p.a,{style:{marginBottom:"5px"},key:t.title},l.a.createElement(R.a,{overlay:l.a.createElement(d.a,null,l.a.createElement(d.a.Item,{key:"1",onClick:function(){return E(t.title)}},l.a.createElement(Ee.a,null),"Rename"),l.a.createElement(d.a.Item,{key:"2",onClick:function(){return v(t.title)}},l.a.createElement(ye.a,null),"Delete")),trigger:["contextMenu"]},l.a.createElement(f.a,{span:10,onClick:function(){return e.onJumpToPage(t.pageIndex)}},l.a.createElement("img",{style:{objectFit:"contain",width:"100%",maxHeight:"128px",border:"1px solid white"},src:oe(t.pageUncPath,150,e.type),alt:"img"}))),l.a.createElement(f.a,{span:14},l.a.createElement(p.a,null,l.a.createElement(f.a,{span:24},l.a.createElement("span",{style:{color:"white"}},t.title)),l.a.createElement(f.a,{span:24,style:{paddingLeft:"10px"}},l.a.createElement(Te,{value:t.tier,colSpan:{label:0,control:24},onChange:function(e,a){y(t.title,a)}})))))})),";"),l.a.createElement(Ce,{visible:m.visible,onClose:function(){return g((function(e){return e.visible=!1,Object(A.a)({},e)}))},initialValue:m.initialValue,onOk:m.onOk}))}))),ze=a(428),We=a.n(ze),Ge=a(68).default;var Je=function(e){return{content:{position:"relative",top:"0%",width:"100%",textAlign:"center",backgroundColor:e?"rgba(200, 200, 200, 0.3)":"rgba(0, 0, 0, 0)"},button:{position:"relative",boxSizing:"border-box",border:e?"1px solid black":"0px"}}},He=function(e,t){return e?l.a.createElement("span",{style:{textAlign:"center",margin:"auto",textShadow:"-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black"}},t):""};function Ye(e){var t=e.isLandscape?{transform:"translatex(calc(50vw - 50%)) translatey(calc(50vh - 50%)) rotate(90deg)",width:"100vh",height:"100vw"}:{transform:"translatex(calc(50vw - 50%)) translatey(calc(50vh - 50%))",width:"100vw",height:"100vh"},a=Object(A.a)({objectFit:"contain"},t),n={objectFit:"contain",height:0,width:0,position:"absolute"};return console.log("pageDisplay",e),function(e){if(".webm"===e||".mp4"===e)return!0;return!1}(e.pageInfo.extension)?l.a.createElement("video",{autoPlay:!0,loop:!0,id:e.id,style:"q0"===e.queue?a:n,src:"q0"===e.queue?ce("".concat(e.albumPath,"\\").concat(e.pageInfo.uncPathEncoded),e.type):""},"video not showing"):l.a.createElement("img",{id:e.id,style:"q0"===e.queue?a:n,src:"q0"===e.queue||"q1"===e.queue?ce("".concat(e.albumPath,"\\").concat(e.pageInfo.uncPathEncoded),e.type):We.a,alt:"Not loaded"})}var Ke=Le(q((function(e){var t=Object(n.useState)({path:null,lpi:0,pages:[],indexes:{cPageI:0,pPageI:0,triad:"zenpen",zenpenIndex:0,chuhenIndex:0,kouhenIndex:0},isLandscape:!1,includeDetail:!1,restartPageTrigger:!1}),a=Object(s.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){void 0!==e.albumCm&&null!==e.albumCm&&e.albumCm.path!==r.path&&o(!1)}),[e.albumCm]);var o=function(t){Ge.get(le(e.type,e.albumCm.path,r.includeDetail)).then((function(a){c({path:e.albumCm.path,lpi:t?0:e.albumCm.lastPageIndex,isLandscape:"Landscape"===a.data.orientation,pages:a.data.fileInfos,indexes:null,includeDetail:r.includeDetail,restartPageTrigger:t?!r.restartPageTrigger:r.restartPageTrigger}),e.albumCm.pageCount!==a.data.fileInfos.length&1!==e.type&&(console.log("PageCount (".concat(e.albumCm.pageCount,") does not match fileInfos length (").concat(a.data.fileInfos.length,")")),Ge.get(ne(e.type,e.albumCm.path)).then((function(e){})).catch((function(t){e.popApiError(t)})))})).catch((function(t){e.popApiError(t)}))};Object(n.useEffect)((function(){var e=r.lpi<r.pages.length?r.lpi:r.pages.length-1;u.jumpTo(e)}),[r.path,r.restartPageTrigger]),Object(n.useEffect)((function(){return document.addEventListener("keydown",i,!1),function(){document.removeEventListener("keydown",i,!1)}}),[]);var i=function(e){27===e.keyCode&&u.close()},u={jumpTo:function(t,a){var n,l,o=r.pages.length-1,i=null!==(n=null===(l=r.indexes)||void 0===l?void 0:l.cPageI)&&void 0!==n?n:0,u=z(t,0,o),s=function(){function e(e,t,a,n){return{newTriad:e,zenpenIndex:t,chuhenIndex:a,kouhenIndex:n}}function t(e){var t=r.pages.length;return((u+e)%t+t)%t}return u%3===0?e("zenpen",u,t(1),t(-1)):u%3===1?e("chuhen",t(-1),u,t(1)):u%3===2?e("kouhen",t(1),t(-1),u):void 0}(),m=s.newTriad,d=s.zenpenIndex,p=s.chuhenIndex,f=s.kouhenIndex,h=r.pages;null!==a&&void 0!==a&&(h[a.index]=a.newPageInfo),c({indexes:{cPageI:u,pPageI:i,triad:m,zenpenIndex:d,chuhenIndex:p,kouhenIndex:f},path:r.path,lpi:r.lpi,isLandscape:r.isLandscape,includeDetail:r.includeDetail,pages:h}),null!=r.path&&t===r.pages.length-1&&1!==e.type&&Ge.post(ae(e.type),{albumPath:r.path,lastPageIndex:t}).then((function(e){})).catch((function(t){e.popApiError(t)}))},rename:function(t,a){var n=D.uncPathEncoded,l=function(){var e=D.uncPathEncoded.split("\\");return e.pop(),e.push(t),W(e,"\\")}(),o={overwrite:!1,src:{albumPath:r.path,alRelPath:n},dst:{albumPath:r.path,alRelPath:l}};e.movePage(o,(function(e){var a=r.pages.findIndex((function(e){return e.uncPathEncoded===n})),o=r.pages.splice(a,1)[0],i=Object(A.a)({},o,{name:t,uncPathEncoded:l});r.pages=r.pages.filter((function(e){return e.uncPathEncoded!==l})),r.pages.push(i),r.pages.sort((function(e,t){return e.uncPathEncoded.localeCompare(t.uncPathEncoded)})),c((function(e){return Object(A.a)({},e)}))}),(function(t){e.popApiError(t)}))},move:function(t){console.log("reader model move",t);var a=D.uncPathEncoded,n={overwrite:!1,src:{albumPath:r.path,alRelPath:a},dst:{albumPath:t,alRelPath:D.name}};e.movePage(n,(function(e){m(D.uncPathEncoded),c((function(e){return Object(A.a)({},e)}))}),(function(t){e.popApiError(t)}))},delete:function(t){var a={albumPath:r.path,alRelPath:t.uncPathEncoded};e.deletePage(a,(function(e){m(t.uncPathEncoded),c((function(e){return Object(A.a)({},e)}))}),(function(t){e.popApiError(t)}))},close:function(){e.onClose(r.path,r.indexes.cPageI)},chapterDeleteSuccess:function(t){e.onChapterDeleteSuccess(r.path,t),Ge.get(le(e.type,e.albumCm.path)).then((function(t){var a=d(r.indexes,t.data.fileInfos.length-1);c({path:e.albumCm.path,lpi:e.albumCm.lastPageIndex,isLandscape:"Landscape"===t.data.orientation,pages:t.data.fileInfos,indexes:Object(A.a)({},r.indexes,{},a),includeDetail:r.includeDetail})})).catch((function(t){e.popApiError(t)}))},chapterRenameSuccess:function(){o(!0)}};function m(e){var t=r.pages.length-2,a=d(r.indexes,t);r.indexes=Object(A.a)({},r.indexes,{},a),r.pages=r.pages.filter((function(t){return t.uncPathEncoded!==e}))}function d(e,t){return{cPageI:z(e.cPageI,0,t),pPageI:z(e.pPageI,0,t),zenpenIndex:z(e.zenpenIndex,0,t),chuhenIndex:z(e.chuhenIndex,0,t),kouhenIndex:z(e.kouhenIndex,0,t)}}function h(){var t=!r.includeDetail;t&&null===r.pages[0].createDate?Ge.get(le(e.type,e.albumCm.path,t)).then((function(e){c((function(a){return a.includeDetail=t,a.pages=e.data.fileInfos,Object(A.a)({},a)}))})).catch((function(t){e.popApiError(t)})):c((function(e){return e.includeDetail=t,Object(A.a)({},e)}))}var g={tierChange:function(t){var a;Ge.put((a=e.type,$(a,"UpdateAlbumTier")),{albumPath:r.path,tier:t}).then((function(e){console.log(e.data)})).catch((function(t){e.popApiError(t)}))},recount:function(){Ge.get(function(e,t){var a=encodeURIComponent(t);return $(e,"RecountAlbumPages?path=".concat(a))}(e.type,r.path)).then((function(t){console.log("new page count",t.data),e.onChapterDeleteSuccess(r.path,t.data)})).catch((function(t){e.popApiError(t)}))}},b=Object(n.useState)(!1),E=Object(s.a)(b,2),v=E[0],y=E[1],x=Object(n.useState)(!1),C=Object(s.a)(x,2),O=C[0],w=C[1],j={rightTop:function(){r.isLandscape?w(!0):u.close()},rightMid:function(){r.isLandscape?h():u.jumpTo(r.indexes.cPageI+1)},rightBot:function(){r.isLandscape?u.close():u.jumpTo(r.pages.length-1)},midTop:function(){r.isLandscape?u.jumpTo(r.indexes.cPageI-1):h()},midMid:function(){y(!0)},midBot:function(){r.isLandscape&&u.jumpTo(r.indexes.cPageI+1)},leftTop:function(){r.isLandscape?u.jumpTo(0):w(!0)},leftMid:function(){r.isLandscape||u.jumpTo(r.indexes.cPageI-1)},leftBot:function(){r.isLandscape?u.jumpTo(r.pages.length-1):u.jumpTo(0)}},P=Object(pe.useSwipeable)({onSwipedUp:function(e){r.isLandscape&&u.jumpTo(r.indexes.cPageI+1)},onSwipedDown:function(e){r.isLandscape&&u.jumpTo(r.indexes.cPageI-1)},onSwipedLeft:function(e){r.isLandscape||u.jumpTo(r.indexes.cPageI+1)},onSwipedRight:function(e){r.isLandscape||u.jumpTo(r.indexes.cPageI-1)}}),k=null!==r.indexes&&0===r.indexes.cPageI,I=Je(k),S={side:Object(A.a)({},I.button,{minHeight:.25*window.innerHeight}),mid:Object(A.a)({},I.button,{minHeight:.5*window.innerHeight})};if(null===r.indexes||0===r.pages.length)return l.a.createElement(l.a.Fragment,null);console.log("currentApm",r);var D="zenpen"===r.indexes.triad?r.pages[r.indexes.zenpenIndex]:"chuhen"===r.indexes.triad?r.pages[r.indexes.chuhenIndex]:"kouhen"===r.indexes.triad?r.pages[r.indexes.kouhenIndex]:null,T=l.a.createElement(Ye,{id:"zenpen-page",albumPath:r.path,pageInfo:r.pages[r.indexes.zenpenIndex],queue:"zenpen"===r.indexes.triad?"q0":"kouhen"===r.indexes.triad?"q1":"q2",isLandscape:r.isLandscape,type:e.type,DEBUGPageTriad:"zenpen"}),N=l.a.createElement(Ye,{id:"chuhen-page",albumPath:r.path,pageInfo:r.pages[r.indexes.chuhenIndex],queue:"chuhen"===r.indexes.triad?"q0":"zenpen"===r.indexes.triad?"q1":"q2",isLandscape:r.isLandscape,type:e.type,DEBUGPageTriad:"chuhen"}),F=l.a.createElement(Ye,{id:"kouhen-page",albumPath:r.path,pageInfo:r.pages[r.indexes.kouhenIndex],queue:"kouhen"===r.indexes.triad?"q0":"chuhen"===r.indexes.triad?"q1":"q2",isLandscape:r.isLandscape,type:e.type,DEBUGPageTriad:"kouhen"}),M=l.a.createElement(B,{onVisible:e.onOpenEditModal});return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"overlay overlay-reader",style:{display:e.isOpen?"block":"none",zIndex:1}},l.a.createElement("div",{style:{height:"100vh",position:"absolute",left:0,top:0}},T,N,F),l.a.createElement("div",{className:"overlay",style:{zIndex:2}},l.a.createElement("div",{className:"overlay-content"},l.a.createElement("span",{className:"with-shadow"},D.name),l.a.createElement("div",{style:{position:"fixed",bottom:"0px",width:"100%",textAlign:"center"}},l.a.createElement("span",{className:"with-shadow"},r.indexes.cPageI+1,"/",r.pages.length)))),r.includeDetail?l.a.createElement("div",{className:"overlay",style:{zIndex:3}},l.a.createElement("div",{className:"overlay-content"},l.a.createElement(p.a,null,l.a.createElement(f.a,{span:6},l.a.createElement("div",{style:S.side})),l.a.createElement(f.a,{span:12},l.a.createElement("div",{style:S.side})),l.a.createElement(f.a,{span:6},l.a.createElement("div",{className:"with-shadow",style:Object(A.a)({textAlign:"left"},S.side)},l.a.createElement("div",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,l=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,r)).toFixed(n))+" "+l[r]}(D.size,0)),l.a.createElement("div",null,G(D.createDate)),l.a.createElement("div",null,G(D.updateDate))))))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"overlay",style:{zIndex:4}},l.a.createElement("div",Object.assign({style:I.content},P),l.a.createElement(p.a,null,l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.leftTop,style:S.side},He(k,"Browse Chapters"))),l.a.createElement(f.a,{span:12},l.a.createElement("div",{onClick:j.midTop,style:S.side},He(k,"Show File Info"))),l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.rightTop,style:S.side},He(k,"Close Album")))),l.a.createElement(p.a,null,l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.leftMid,style:S.mid},He(k,"Previous Page"))),l.a.createElement(f.a,{span:12},l.a.createElement(R.a,{overlay:M,trigger:["contextMenu"],disabled:!1},l.a.createElement("div",{onClick:j.midMid,style:S.mid},He(k,"Context Menu")))),l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.rightMid,style:S.mid},He(k,"Next Page")))),l.a.createElement(p.a,null,l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.leftBot,style:S.side},He(k,"First Page"))),l.a.createElement(f.a,{span:12},l.a.createElement("div",{onClick:j.midBot,style:S.side})),l.a.createElement(f.a,{span:6},l.a.createElement("div",{onClick:j.rightBot,style:S.side},He(k,"Last Page"))))))),l.a.createElement(Se,{visible:v,albumCm:e.albumCm,initialValue:r.indexes.cPageI,pageName:D.name,type:e.type,onTierChange:g.tierChange,onRecount:function(){g.recount(),y(!1)},onJump:function(e){u.jumpTo(e),y(!1)},onUndoJump:function(){u.jumpTo(r.indexes.pPageI),y(!1)},onRename:function(e,t){u.rename(e,t),y(!1)},onMove:function(e){u.move(e),y(!1)},onDelete:function(){u.delete(D),y(!1)},onCancel:function(){return y(!1)}}),l.a.createElement(Ve,{visible:O,albumPath:r.path,type:e.type,onClose:function(){return w(!1)},onJumpToPage:u.jumpTo,onChapterDeleteSuccess:u.chapterDeleteSuccess,onChapterRenameSuccess:u.chapterRenameSuccess}))}))),_e=a(203),Qe=a(68).default;var Ze=Object(i.g)(q((function(e){console.log("selfComps rendering"),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(!1),h=Object(s.a)(d,2),g=h[0],b=h[1],E=function(){return new Promise((function(t,a){var n=e.queryParts.path,l=null!==n&&void 0!==n?n:"";Qe.get(ee(1,0,0,l)).then((function(e){c(e.data),console.log("sc albums",e.data),t("param from resolve")})).catch((function(t){e.popApiError(t),a("param from reject")}))}))};Object(n.useEffect)((function(){E()}),[e.queryParts]);var v={view:function(t,a){0===t?e.history.push("Sc?path="+a.path):(m(a),b(!0))},close:function(t,a){b(!1),Qe.post(ae(1),{albumPath:t,lastPageIndex:a}).then((function(e){})).catch((function(t){e.popApiError(t)})),c(r.map((function(e,n){return e.path!==t?e:Object(A.a)({},e,{lastPageIndex:a})})))}},y={pageDeleteSuccess:function(e){c(r.map((function(t,a){return t.path!==e?t:Object(A.a)({},t,{pageCount:t.pageCount-1})})))},chapterDeleteSuccess:function(e,t){c(r.map((function(a,n){return a.path!==e?a:Object(A.a)({},a,{pageCount:t,lastPageIndex:0})})))}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{onRefresh:E},l.a.createElement(p.a,{gutter:0,type:"flex"},r.map((function(e,t){return l.a.createElement(f.a,{style:{textAlign:"center"},lg:3,md:6,xs:12,key:"albumCol"+e.path},l.a.createElement(de,{index:t,albumCm:e,onView:function(t){return v.view(e.pageCount,t)},showContextMenu:!0,type:1}))})))),l.a.createElement(Ke,{isOpen:g,onClose:v.close,onPageDeleteSuccess:y.pageDeleteSuccess,onChapterDeleteSuccess:y.chapterDeleteSuccess,albumCm:u,type:1}))}))),Xe=a(1074);var $e=function(e){function t(t){e.onChange(e.label,t.target.value)}var a={input:e.showClearButton?14:18,button:e.showClearButton?4:0};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,8]},l.a.createElement(f.a,{sm:6},l.a.createElement("label",{className:"my-editor-label"},e.label)),l.a.createElement(f.a,{sm:a.input},null==e.row?l.a.createElement(xe.a,{placeholder:e.placeholder,value:e.value,onChange:t}):l.a.createElement(xe.a.TextArea,{placeholder:e.placeholder,value:e.value,onChange:t,autoSize:{minRows:e.row,maxRows:e.row}})),e.showClearButton?l.a.createElement(f.a,{sm:a.button},l.a.createElement(g.a,{style:{width:"100%",marginLeft:"5px"},onClick:function(){return e.onChange(e.label,"")}},l.a.createElement("span",{className:"my-editor-button-label"},"Clear"))):l.a.createElement(l.a.Fragment,null)))},et=a(1072);var tt=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,8]},l.a.createElement(f.a,{sm:6},l.a.createElement("label",{className:"my-editor-label"},e.label)),l.a.createElement(f.a,{sm:18},l.a.createElement(et.a.Group,{onChange:function(t){e.onChange(e.label,t.target.value)},value:e.value,style:{width:"100%"}},l.a.createElement(p.a,null,e.items.map((function(e){return l.a.createElement(f.a,{span:6,key:e},l.a.createElement(et.a,{key:e,value:e},l.a.createElement("span",{style:{color:"white"}},e)))})))))))};var at=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,8]},l.a.createElement(f.a,{sm:6},l.a.createElement("label",{className:"my-editor-label"},e.label)),l.a.createElement(f.a,{sm:18},l.a.createElement(p.a,{gutter:2},e.items.map((function(t){return l.a.createElement(f.a,{span:6,key:t},l.a.createElement(g.a,{key:t,type:e.value.includes(t)?"primary":"link",ghost:!!e.value.includes(t),onClick:function(){return a=t,void e.onChange(e.label,a);var a},style:{width:"100%",textAlign:"left",marginBottom:"2px"}},t))}))))))},nt=a(632),lt=a(68).default;var rt=q((function(e){var t=Object(N.b)("".concat(_,"GetAlbumInfo")),a=t.data,r=t.error,c=Object(n.useState)({path:"",pageCount:0,lastPageIndex:0,album:{title:"",category:"Manga",orientation:"Portrait",artists:[],tags:[],languages:[],flags:[],tier:0,cover:"",isWip:!1,isRead:!1,entryDate:null}}),o=Object(s.a)(c,2),i=o[0],u=o[1];Object(n.useEffect)((function(){void 0!==e.albumPath&&lt.get(function(e,t){var a=encodeURIComponent(t);return $(e,"GetAlbumVm?path=".concat(a))}(e.type,e.albumPath)).then((function(e){u(e.data)})).catch((function(t){e.popApiError(t)}))}),[e.albumPath]);var m={albumVmChange:function(e,t){var a=Object(A.a)({},i),n=t;"Artists"===e?n=t.split(","):"Tags"!==e&&"Languages"!==e||((n=i.album[U(e)]).includes(t)?n=nt.pull(n,t):n.push(t)),a.album[U(e)]=n,u(a)},ok:function(){e.onOk(i)},cancel:function(){e.onCancel()},editFiles:function(){e.onEditFiles(i)},delete:function(){e.onDelete(i)},refresh:function(){e.onRefresh(i)}},d=l.a.createElement("div",{className:"ant-modal-root"},l.a.createElement("div",{className:"ant-modal-mask"}),l.a.createElement("div",{tabIndex:-1,className:"ant-modal-wrap",role:"dialog","aria-labelledby":"rcDialogTitle0",onClick:m.cancel},l.a.createElement("div",{role:"document",className:"my-ant-modal",onClick:function(e){return e.stopPropagation()}},l.a.createElement("div",{className:"ant-modal-content"},l.a.createElement("button",{onClick:m.cancel,type:"button","aria-label":"Close",className:"ant-modal-close"},l.a.createElement("span",{className:"ant-modal-close-x"},l.a.createElement("i",{"aria-label":"icon: close",className:"anticon anticon-close ant-modal-close-icon"},l.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"close",fill:"currentColor","aria-hidden":"true",style:{height:"1em",width:"1em"}},l.a.createElement("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}))))),l.a.createElement("div",{className:"my-ant-modal-header"},l.a.createElement("div",{className:"my-ant-modal-title",id:"rcDialogTitle0"},"Edit Metadata")),l.a.createElement("div",{className:"my-ant-modal-body"},r?"album Info Fetching error":a?l.a.createElement(l.a.Fragment,null,l.a.createElement($e,{label:"Title",row:3,value:i.album.title,onChange:m.albumVmChange}),l.a.createElement($e,{label:"Artists",value:i.album.artists.join(),onChange:m.albumVmChange}),l.a.createElement(tt,{label:"Category",value:i.album.category,items:a.categories,onChange:m.albumVmChange}),l.a.createElement(tt,{label:"Orientation",value:i.album.orientation,items:a.orientations,onChange:m.albumVmChange}),l.a.createElement(at,{label:"Tags",value:i.album.tags,items:a.tags,onChange:m.albumVmChange}),l.a.createElement(at,{label:"Languages",value:i.album.languages,items:a.languages,onChange:m.albumVmChange}),l.a.createElement($e,{label:"Note",value:i.album.note,onChange:m.albumVmChange,showClearButton:!0}),l.a.createElement(Te,{label:"Tier",value:i.album.tier,onChange:m.albumVmChange}),l.a.createElement(p.a,{gutter:[0,8]},l.a.createElement(f.a,{span:6},l.a.createElement("label",{className:"my-editor-label"},"Flags")),l.a.createElement(f.a,{sm:18},l.a.createElement(p.a,{gutter:2},l.a.createElement(f.a,{span:6},l.a.createElement(Xe.a,{onChange:function(e){return m.albumVmChange("IsWip",e.target.checked)},checked:i.album.isWip},l.a.createElement("span",{style:{color:"white"}},"WIP"))),l.a.createElement(f.a,{span:6},l.a.createElement(Xe.a,{onChange:function(e){return m.albumVmChange("IsRead",e.target.checked)},checked:i.album.isRead},l.a.createElement("span",{style:{color:"white"}},"Read"))))))):"loading..."),l.a.createElement("div",{className:"my-ant-modal-footer"},l.a.createElement(p.a,null,l.a.createElement(f.a,{span:5},l.a.createElement(g.a,{onClick:m.delete,type:"danger",style:{width:"100%"}},l.a.createElement("span",{className:"my-editor-button-label"},"Delete"))),l.a.createElement(f.a,{span:1}),l.a.createElement(f.a,{span:5},l.a.createElement(g.a,{onClick:m.refresh,type:"ghost",style:{width:"100%",color:"white"}},l.a.createElement("span",{className:"my-editor-button-label"},"Refresh"))),l.a.createElement(f.a,{span:2}),l.a.createElement(f.a,{span:5},l.a.createElement(g.a,{onClick:m.editFiles,type:"ghost",style:{width:"100%",color:"white"}},l.a.createElement("span",{className:"my-editor-button-label"},"Files"))),l.a.createElement(f.a,{span:1}),l.a.createElement(f.a,{span:5},l.a.createElement(g.a,{onClick:m.ok,type:"primary",style:{width:"100%"}},l.a.createElement("span",{className:"my-editor-button-label"},"Save")))))))));return l.a.createElement(l.a.Fragment,null,e.isOpen?d:"")})),ct=a(285),ot=function(e){var t=e.children;return Object(ct.useMediaQuery)({minWidth:801})?t:null},it=function(e){var t=e.children;return Object(ct.useMediaQuery)({maxWidth:800})?t:null},ut=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=800},st=b.a.confirm,mt=a(68).default;var dt=Object(i.g)(q((function(e){console.log("albums rendering"),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(0),i=Object(s.a)(o,2),m=i[0],d=i[1],h=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=576?2:ut()?4:8,g=function(){return new Promise((function(t,a){var n=e.queryParts,l=n.page,r=n.row,o=n.query;mt.get(ee(0,l,r,o)).then((function(e){c(e.data),t("param from resolve")})).catch((function(t){e.popApiError(t),a("param from reject")}))}))};Object(n.useEffect)((function(){g()}),[e.queryParts]);var b=Object(n.useState)([]),E=Object(s.a)(b,2),v=E[0],y=E[1];Object(n.useEffect)((function(){var t=r.filter((function(t){return e.selectedTiers.includes("".concat(t.tier))||e.selectedTiers.includes("N")&&!t.isRead})).slice(0,100*m);y(t)}),[r,m,e.selectedTiers]);var x=Object(n.useState)(!1),C=Object(s.a)(x,2),O=C[0],w=C[1];Object(n.useEffect)((function(){var e=document.body;e.style.overflow=O?"hidden":"visible"}),[O]);var j=Object(n.useState)(null),P=Object(s.a)(j,2),k=P[0],I=P[1],S={view:function(e){console.log("view",e),I(e),w(!0)},close:function(t,a){console.log("readerHandler close triggered"),w(!1),mt.post(ae(0),{albumPath:t,lastPageIndex:a}).then((function(e){})).catch((function(t){e.popApiError(t)})),c(r.map((function(e,n){return e.path!==t?e:Object(A.a)({},e,{lastPageIndex:a,isRead:a===e.pageCount-1||e.isRead})})))}},D=Object(n.useState)(!1),T=Object(s.a)(D,2),N=T[0],R=T[1],F=Object(n.useState)(void 0),L=Object(s.a)(F,2),B=L[0],q=L[1],U={edit:function(e){R(!0),q(e)},pageDeleteSuccess:function(e){c(r.map((function(t,a){return t.path!==e?t:Object(A.a)({},t,{pageCount:t.pageCount-1})})))},chapterDeleteSuccess:function(e,t){c(r.map((function(a,n){return a.path!==e?a:Object(A.a)({},a,{pageCount:t,lastPageIndex:0})})))}},V={ok:function(t){R(!1),mt.post("".concat(_,"UpdateAlbum"),t).then((function(e){console.log("edit success. Path: ",e.data);var a=Object(u.a)(r),n=a.findIndex((function(e){return e.path===t.path}));a[n].fullTitle="[".concat(t.album.artists.join(", "),"] ").concat(t.album.title),a[n].languages=t.album.languages,a[n].note=t.album.note,c(a)})).catch((function(t){e.popApiError(t)}))},cancel:function(){R(!1)},delete:function(t){var a=t.album;st({title:"Delete album [".concat(a.artists.join(", "),"] ").concat(a.title,"?"),icon:l.a.createElement(De.a,null),okText:"\xa0\xa0\xa0YES\xa0\xa0\xa0",okType:"danger",cancelText:"\xa0\xa0\xa0NO\xa0\xa0\xa0",onOk:function(){mt.delete(function(e,t){var a=encodeURIComponent(t);return $(e,"DeleteAlbum?path=".concat(a))}(0,t.path)).then((function(e){R(!1),c(r.filter((function(e){return e.path!==t.path})))})).catch((function(t){R(!1),e.popApiError(t)}))},onCancel:function(){}})},refresh:function(t){R(!1),mt.get(ne(0,t.path)).then((function(t){e.popInfo("Refresh Album",t.data,null)})).catch((function(t){e.popApiError(t)}))},editFiles:function(t){R(!1),e.history.push("FileManagement?path="+t.path)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(_e.a,{onRefresh:g},l.a.createElement(p.a,{gutter:0,type:"flex"},v.map((function(e,t){var a=(t+Math.floor(t/h))%2===0?"#333":"inherit";return l.a.createElement(f.a,{style:{textAlign:"center",backgroundColor:a},lg:3,md:6,xs:12,key:"albumCol"+e.path},l.a.createElement(de,{index:t,albumCm:e,onView:S.view,onEdit:U.edit,showContextMenu:!0}))}))),l.a.createElement(M.a,{as:"div",onChange:function(e,t){console.log("inViewChange",t),t.isIntersecting&&d(m+1)}},l.a.createElement("div",{style:{width:"100%",height:"5px",backgroundColor:"transparent"}}))),l.a.createElement("div",{style:{position:"fixed",top:0,backgroundColor:"rgba(0,0,0,0)"}},l.a.createElement(it,null,l.a.createElement("div",{style:{position:"relative",height:"38px"}})),l.a.createElement("div",{style:{position:"relative",backgroundColor:"#2d2d2d"}},"Total: ".concat(r.length," Filtered: ").concat(v.length))),l.a.createElement(Ke,{isOpen:O,onClose:S.close,onPageDeleteSuccess:U.pageDeleteSuccess,onChapterDeleteSuccess:U.chapterDeleteSuccess,onOpenEditModal:function(){R(!0),q(null===k||void 0===k?void 0:k.path)},albumCm:k}),l.a.createElement(rt,{isOpen:N,albumPath:B,onOk:V.ok,onCancel:V.cancel,onDelete:V.delete,onRefresh:V.refresh,onEditFiles:V.editFiles}))})));var pt=function(e){var t="Genres"===e.page?"".concat(_,"GetGenreCardModels"):"Artists"===e.page?"".concat(_,"GetFeaturedArtistCardModels"):null,a=Object(N.b)(t),n=a.data;if(a.error)return l.a.createElement("div",null,"error!");if(!n)return l.a.createElement("div",null,"loading...");var r={view:function(t){console.log("query click",t),e.history.push("/albums?query="+t.path)}};return l.a.createElement(l.a.Fragment,null,n.map((function(t,a){return l.a.createElement(p.a,{key:"acgRow"+t.name,gutter:0,type:"flex",style:{borderBottom:"1px solid rgb(83, 83, 83)",marginBottom:"5px"}},"This feature is cancelled"===e.page?l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",{style:{position:"absolute",top:"-18px",left:"10px"}},t.name)):"",t.albumCms.map((function(e){return l.a.createElement(f.a,{style:{textAlign:"center"},lg:3,md:6,xs:12,key:"albumCol"+e.path},l.a.createElement(de,{index:a,albumCm:e,onView:r.view,onEdit:function(){},onDelete:function(){},showContextMenu:!1}))})))})))},ft=a(67),ht=a(39),gt=a(4),bt=a(1061),Et=a(206),vt=a(514),yt=(b.a.confirm,a(68).default);var xt=Le(q((function(e){var t=[Object(gt.h)({id:"custom_rename",requiresSelection:!0,button:{name:"R",toolbar:!0,contextMenu:!0,icon:gt.b.code}}),Object(gt.h)({id:"custom_delete",requiresSelection:!0,button:{name:"D",toolbar:!0,contextMenu:!0,icon:gt.b.trash}}),Object(gt.h)({id:"custom_move",requiresSelection:!0,button:{name:"M",toolbar:!0,contextMenu:!0,icon:gt.b.folder}}),gt.a.EnableGridView,gt.a.EnableListView,gt.a.UploadFiles,gt.a.CreateFolder],a={createFolder:function(t){s({visible:!0,btnText:"Create Folder",initialValue:"",onOk:function(t,a){console.log("folder name",t),h((function(a){return null!==f.subDir&&e.popError("Invalid Operation","Creating folder inside a folder is not allowed"),a.fsNodes.unshift({name:t,size:0,nodeType:0,uncPathEncoded:null,childs:[]}),Object(Ne.a)({},a)}))}})},openFolder:function(e){if(e.payload.targetFile.isDir){var t="Root"!==e.payload.targetFile.name?e.payload.targetFile.name:null,a=null!==t?[].concat(Object(ht.a)(f.dirChains),[{id:"1",name:t,isDir:!0}]):m;h((function(e){return e.subDir=t,e.dirChains=a,Object(Ne.a)({},e)}))}},delete:function(t){var a,n=t.state.selectedFiles[0],l=null===(a=f.dirChains.find((function(e){return"1"===e.id})))||void 0===a?void 0:a.name,r=function(){var e=n.isDir?n.name:W([l,n.name],"\\");return{albumPath:f.albumPath,alRelPath:e}}();e.deletePage(r,(function(e){console.log("delete success",e);var t=n.isDir||null==l?f.fsNodes.filter((function(e){return e.name!==n.name})):(f.fsNodes.forEach((function(e){e.name===l&&(e.childs=e.childs.filter((function(e){return e.name!==n.name})))})),f.fsNodes);h((function(e){return Object(Ne.a)({},e,{fsNodes:t})}))}),(function(t){e.popApiError(t)}))},rename:function(t){0!==t.state.selectedFiles.length&&s({visible:!0,btnText:"Rename",initialValue:t.state.selectedFiles[0].name,onOk:function(t,a){var n=W([f.subDir,a],"\\"),l=W([f.subDir,t],"\\"),c={overwrite:!1,src:{albumPath:f.albumPath,alRelPath:n},dst:{albumPath:f.albumPath,alRelPath:l}};e.movePage(c,(function(e){r.move(c)}),(function(t){e.popApiError(t)}))}})},dragNDrop:function(t){if(!t.payload.draggedFile.isDir&&t.payload.destination.isDir){var a=t.payload.draggedFile.name,n=W([f.subDir,a],"\\"),l=W(["Root"!==t.payload.destination.name?t.payload.destination.name:null,a],"\\"),c={overwrite:!1,src:{albumPath:f.albumPath,alRelPath:n},dst:{albumPath:f.albumPath,alRelPath:l}};e.movePage(c,(function(e){r.move(c)}),(function(t){e.popApiError(t)}))}}},r={move:function(e){e.src.albumPath;var t=c(e.src.alRelPath),a=c(e.dst.alRelPath),n=function(){if(null===t.subDir){var e=f.fsNodes.findIndex((function(e){return e.name===t.fileName}));return f.fsNodes.splice(e,1)[0]}var a=f.fsNodes.findIndex((function(e){return e.name===t.subDir})),n=f.fsNodes[a].childs.findIndex((function(e){return e.name===t.fileName}));return f.fsNodes[a].childs.splice(n,1)[0]}(),l=Object(Ne.a)({},n,{name:a.fileName}),r=(function(){if(null===a.subDir){var e=f.fsNodes.findIndex((function(e){return e.name===a.fileName}));if(-1!==e)f.fsNodes.splice(e,1)[0]}else{var t=f.fsNodes.findIndex((function(e){return e.name===a.subDir})),n=f.fsNodes[t].childs.findIndex((function(e){return e.name===a.fileName}));if(-1!==n)f.fsNodes[t].childs.splice(n,1)[0]}}(),null!==a.subDir?f.fsNodes.findIndex((function(e){return e.name===a.subDir})):null);function c(e){var t=e.split("\\");return 2===t.length?{subDir:t[0],fileName:t[1]}:{subDir:null,fileName:t[0]}}function o(e,t){if(e.nodeType===t.nodeType){var a=e.name.toLowerCase(),n=t.name.toLowerCase();return a<n?-1:a>n?1:0}return e.nodeType>t.nodeType?1:-1}null!==r?(f.fsNodes[r].childs.push(l),f.fsNodes[r].childs.sort(o)):(f.fsNodes.push(l),f.fsNodes.sort(o)),h((function(e){return Object(Ne.a)({},e)}))}},c={visible:!1,initialValue:"ad",btnText:null},o=Object(n.useState)(c),i=Object(ft.a)(o,2),u=i[0],s=i[1],m=[{id:"0",name:"Root",isDir:!0}],d=Object(n.useState)({albumPath:null,title:"",subDir:null,fsNodes:[],dirChains:m}),p=Object(ft.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){""!==e.path&&null!==e.path&&void 0!==e.path&&yt.get(function(e,t){var a=encodeURIComponent(t);return $(e,"GetAlbumFsNodes?path=".concat(a))}(e.type,e.path)).then((function(t){h({albumPath:e.path,title:t.data.title,subDir:null,fsNodes:t.data.fsNodes,dirChains:m}),console.log(t.data)})).catch((function(t){e.popApiError(t)}))}),[e.path]);var g=Object(n.useState)([]),b=Object(ft.a)(g,2),E=b[0],v=b[1];Object(n.useEffect)((function(){var e=(null!==f.subDir?f.fsNodes.find((function(e){return e.name===f.subDir})).childs:f.fsNodes).map((function(e,t){var a;return{id:t+1,name:e.name,isDir:0===e.nodeType,thumbnailUrl:1===e.nodeType?oe(e.uncPathEncoded,150):null,size:e.size,childrenCount:null===(a=e.childs)||void 0===a?void 0:a.length,selectable:!0,draggable:0!==e.nodeType}}));v(e)}),[f]);var y=ut()?vt.a:Et.a;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:"100%",padding:"0px 8px 0px 8px",borderTop:"1px solid grey",borderBottom:"1px solid grey",marginBottom:"2px"}},l.a.createElement("h3",null,f.title)),l.a.createElement("div",{style:{height:"80vh"}},l.a.createElement(bt.a,{backend:y},l.a.createElement(gt.c,{darkMode:!0,files:E,folderChain:f.dirChains,fileActions:t,disableDragAndDropProvider:!0,disableDefaultFileActions:!0,onFileAction:function(e){"custom_delete"===e.id?a.delete(e):"custom_rename"===e.id?a.rename(e):"custom_move"===e.id?console.log(e.id):e.id===gt.a.EndDragNDrop.id?a.dragNDrop(e):e.id===gt.a.UploadFiles.id?console.log(e.id):e.id===gt.a.OpenFiles.id?a.openFolder(e):e.id===gt.a.OpenParentFolder.id?console.log(e.id):e.id===gt.a.CreateFolder.id&&a.createFolder(e)}},l.a.createElement(gt.f,null),l.a.createElement(gt.g,null),l.a.createElement(gt.e,null),l.a.createElement(gt.d,null)))),l.a.createElement(Ce,{visible:u.visible,onClose:function(){return s(c)},initialValue:u.initialValue,onOk:u.onOk,btnText:u.btnText}))}))),Ct=a(1062),Ot=a(1064),wt=a(438),jt=a(513),Pt=(a(68).default,Object(wt.a)({height:300,width:"100%"}));var kt=q((function(e){function t(t,a,n,l){return{isLoading:!1,percent:0,eventMsgs:[],text:t,icon:a,execute:function(){var t,a;t=n,a=!0,i((function(e){return e[t].isLoading=a,e[t].progress=a?0:100,Object(A.a)({},e)}));var r=new EventSource(l,{});r.onmessage=function(t){var a=JSON.parse(t.data);console.log("res data",a);var l=a.currentStep!==a.maxStep;l||r.close(),a.isError&&e.popError("API Error",a.message);var c=V(a.currentStep,a.maxStep);i((function(e){return e[n].percent=c,e[n].isLoading=l,e[n].eventMsgs.push(a),Object(A.a)({},e)}))}}}}var a,r=Object(n.useState)({reload:t("Reload","reload","reload",$(a,"ReloadDatabase")),fullScan:t("Full Scan","sync","fullScan",re()),checkApiUrl:{isLoading:!1,percent:0,eventMsgs:[],text:"Check Url",icon:"check-circle",execute:null},checkMediaUrl:{isLoading:!1,percent:0,eventMsgs:[],text:"Check Url",icon:"check-circle",execute:null},checkResMediaUrl:{isLoading:!1,percent:0,eventMsgs:[],text:"Check Url",icon:"check-circle",execute:null}}),c=Object(s.a)(r,2),o=c[0],i=c[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(It,e),l.a.createElement(Ct.a,{orientation:"left",style:{color:"white"}},"Actions"),l.a.createElement(St,o.reload),l.a.createElement(St,o.fullScan),l.a.createElement(Ct.a,{orientation:"left",style:{color:"white"}},"Event Stream"))}));function It(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){c(H)}),[]);var o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){m(Y)}),[]);var d=Object(n.useState)(null),p=Object(s.a)(d,2),f=p[0],h=p[1];return Object(n.useEffect)((function(){h(K)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Dt,{textAlign:"right",col0:l.a.createElement(b,{text:"API"}),col1:l.a.createElement(xe.a.Search,{value:r,onChange:function(e){0},onSearch:function(){0},enterButton:!0})}),l.a.createElement(Dt,{textAlign:"right",col0:l.a.createElement(b,{text:"Media"}),col1:l.a.createElement(xe.a.Search,{value:u,onChange:function(e){0},onSearch:function(){0},enterButton:!0})}),l.a.createElement(Dt,{textAlign:"right",col0:l.a.createElement(b,{text:"Res Media"}),col1:l.a.createElement(xe.a.Search,{value:f,onChange:function(e){0},onSearch:function(){0},enterButton:!0})}),l.a.createElement(Dt,{textAlign:"right",col1:l.a.createElement(g.a,{type:"primary",onClick:function(){var e;e=r,window.localStorage.setItem("apiBaseUrl",e),function(e){window.localStorage.setItem("mediaBaseUrl",e)}(u),function(e){window.localStorage.setItem("resMediaBaseUrl",e)}(f)},style:{width:"100%",maxWidth:"100px"},disabled:!0},"Save")}));function b(e){var t={paddingTop:"4px",fontWeight:"bold"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:Object(A.a)({float:"left"},t)},e.text),l.a.createElement("div",{style:Object(A.a)({float:"right"},t)},":"))}}function St(e){e.eventMsgs.map((function(e){return e.message})).join("\n");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},l.a.createElement("div",{style:{width:"130px"}},l.a.createElement(g.a,{icon:e.icon,type:"primary",loading:e.isLoading,onClick:e.execute,block:!0,style:{width:"100%",maxWidth:"140px"},disabled:!0},e.text)),l.a.createElement("div",{style:{height:"32px",flex:"auto",marginLeft:"10px",display:"flex",justifyContent:"flex-end",flexDirection:"column"}},l.a.createElement(Ot.a,{strokeLinecap:"square",percent:e.percent}))),l.a.createElement("div",{hidden:0===e.eventMsgs.length,style:{display:"flex",flexDirection:"row",marginBottom:"5px"}},l.a.createElement("div",{style:{width:"130px"}}),l.a.createElement("div",{style:{flex:"auto",marginLeft:"10px",paddingRight:"32px"}},l.a.createElement(jt.a,{className:Pt},e.eventMsgs.map((function(e){return l.a.createElement("p",{style:{marginBottom:"0.2em"}},e.message)}))))))}function Dt(e){var t,a={display:"flex",flexDirection:"row",marginBottom:"5px",textAlign:null!==(t=e.textAlign)&&void 0!==t?t:"left"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:a},l.a.createElement("div",{style:{width:"130px"}},e.col0),l.a.createElement("div",{style:{height:"32px",flex:"auto",marginLeft:"10px",display:"flex",justifyContent:"flex-end",flexDirection:"column"}},e.col1)))}m.a.Header;var Tt=m.a.Content,Nt=m.a.Footer,At=m.a.Sider,Rt=d.a.SubMenu;var Ft=Object(i.g)(q((function(e){var t,a,r,c,i=Object(n.useState)(!1),u=Object(s.a)(i,2),g=u[0],b=u[1],w=Object(n.useState)(!1),j=Object(s.a)(w,2),P=j[0],k=j[1],I=Object(n.useState)([]),S=Object(s.a)(I,2),D=S[0],A=S[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("selectedTiers");A(null!=e?JSON.parse(e):["N","0","1","2","3"])}),[]);var R=null!==(t=T.a.parse(e.location.search).query)&&void 0!==t?t:"",F=null!==(a=T.a.parse(e.location.search).page)&&void 0!==a?a:0,M=null!==(r=T.a.parse(e.location.search).row)&&void 0!==r?r:0,L=null!==(c=T.a.parse(e.location.search).path)&&void 0!==c?c:"",B={query:R,page:F,row:M,path:L},q=function(){function t(e,t){return{page:e,selectedMenu:t}}if("Sc"===e.page)return t(l.a.createElement(Ze,{queryParts:B}),"1");if("Albums"===e.page)return t(l.a.createElement(dt,{queryParts:B,selectedTiers:D}),"2");if("Artists"===e.page)return t(l.a.createElement(pt,{page:e.page,history:e.history}),"3");if("Genres"===e.page)return t(l.a.createElement(pt,{page:e.page,history:e.history}),"4");if("FileManagement"===e.page){var a,n=null!==(a=T.a.parse(e.location.search).path)&&void 0!==a?a:"";return t(l.a.createElement(xt,{path:n}),"")}return"Setting"===e.page?t(l.a.createElement(kt,{page:e.page}),"5"):void 0}(),U=q.page,V=q.selectedMenu,z={search:function(e){z.goToAlbumList(e)},plus:function(e){var t="tag:"+e,a="tag!"+e,n=(""!==R?R.split(","):[]).filter((function(e,n){return!(e===t||e===a)}));n.push(t);var l=n.join(",");z.goToAlbumList(l)},minus:function(e){var t="tag:"+e,a="tag!"+e,n=(""!==R?R.split(","):[]).filter((function(e,n){return!(e===t||e===a)}));n.push(a);var l=n.join(",");z.goToAlbumList(l)},goToAlbumList:function(t){var a=new URLSearchParams(window.location.search);a.set("query",t),e.history.push("Albums?"+a.toString())}},W={fontWeight:600},G=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"logo"}),l.a.createElement(Bt,{query:R,onOk:function(e){return z.goToAlbumList(e)}}),l.a.createElement(d.a,{theme:"dark",defaultSelectedKeys:[V],defaultOpenKeys:["sub1"],mode:"inline"},"",l.a.createElement(d.a.Item,{key:"2"},l.a.createElement(o.b,{to:"/albums"},l.a.createElement(E.a,null),l.a.createElement("span",{style:W},"Albums"))),l.a.createElement(d.a.Item,{key:"3"},l.a.createElement(o.b,{to:"/artists"},l.a.createElement(v.a,null),l.a.createElement("span",{style:W},"Artists"))),l.a.createElement(d.a.Item,{key:"4"},l.a.createElement(o.b,{to:"/genres"},l.a.createElement(y.a,null),l.a.createElement("span",{style:W},"Genres"))),l.a.createElement(Rt,{key:"sub1",title:l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,null),l.a.createElement("span",{style:W},"Tags"))},l.a.createElement(Mt,{onPlus:z.plus,onMinus:z.minus,querStr:R})),l.a.createElement(d.a.Item,{key:"5"},l.a.createElement(o.b,{to:"/setting"},l.a.createElement(C.a,null),l.a.createElement("span",{style:W},"Setting")))));return l.a.createElement(N.a,{value:{revalidateOnFocus:!1,fetcher:function(e){return fetch(e).then((function(e){return e.json()}))}}},l.a.createElement(m.a,{style:{minHeight:"100vh"}},l.a.createElement(it,null,l.a.createElement(m.a,{className:"mobile-header"},l.a.createElement(p.a,null,l.a.createElement(f.a,{span:12}),l.a.createElement(f.a,{span:10},l.a.createElement(l.a.Fragment,null)),l.a.createElement(f.a,{span:2,className:"hamburger-container",onClick:function(){return b(!0)}},l.a.createElement(O.a,{className:"hamburger"})))),l.a.createElement(h.a,{placement:"right",closable:!1,onClose:function(){return b(!1)},visible:g},G)),l.a.createElement(ot,null,l.a.createElement(At,{collapsible:!0,collapsed:P,onCollapse:function(e){return k(e)}},G)),l.a.createElement(m.a,{className:"site-layout"},l.a.createElement(Tt,null,l.a.createElement(it,null,l.a.createElement("div",{style:{paddingTop:"5x"}},"Padding for mobile")),l.a.createElement("div",{className:"site-layout-background",style:{paddingTop:25,paddingLeft:10,paddingRight:10,minHeight:360}},U)),l.a.createElement(Nt,{style:{textAlign:"center"}},"-----------------"))))})));function Mt(e){var t=Object(N.b)("".concat(_,"GetTagVMs")),a=t.data;return t.error?l.a.createElement("div",null,"error!"):a?l.a.createElement(l.a.Fragment,null,a.map((function(t,a){return l.a.createElement(Lt,{key:t.name,tag:t,onPlus:e.onPlus,onMinus:e.onMinus,selectStatus:n(t.name,e.querStr)})}))):l.a.createElement("div",null,"loading...");function n(e,t){var a=t.split(",");return a.filter((function(t){return t.toLowerCase().includes("tag:"+e.toLowerCase())})).length>0?"plus":a.filter((function(t){return t.toLowerCase().includes("tag!"+e.toLowerCase())})).length>0?"minus":"none"}}function Lt(e){var t=encodeURIComponent(e.tag.query),a="plus"===e.selectStatus?"#1890ff":"",n="minus"===e.selectStatus?"#1890ff":"";return l.a.createElement("li",{className:"ant-menu-item",role:"menuitem",style:{paddingLeft:"24px",paddingRight:"0px",height:"28px",marginTop:"0px",marginBottom:"0px"}},l.a.createElement(p.a,null,l.a.createElement(f.a,{span:5,style:{textAlign:"center"},onClick:function(){return e.onPlus(e.tag.name)}},l.a.createElement(w.a,{style:{marginRight:"0px",backgroundColor:a}})),l.a.createElement(o.b,{to:"/albums?query="+t},l.a.createElement(f.a,{span:14},l.a.createElement("span",{style:{fontSize:"12px",opacity:.8}},e.tag.name))),l.a.createElement(f.a,{span:5,style:{textAlign:"center"},onClick:function(){return e.onMinus(e.tag.name)}},l.a.createElement(j.a,{style:{marginRight:"0px",backgroundColor:n}}))))}function Bt(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){m(e.query)}),[e.query]),l.a.createElement("div",{style:{paddingLeft:"24px"}},l.a.createElement(g.a,{type:"link",onClick:function(){return c(!0)},style:{width:"90%",textAlign:"left",padding:"0px"}},l.a.createElement(P.a,null),l.a.createElement("span",{style:{fontWeight:600}}," Query Editor ")),l.a.createElement(b.a,{visible:r,onCancel:function(){return c(!1)},closable:!1,footer:l.a.createElement(g.a,{type:"primary",onClick:function(){c(!1),e.onOk(u)}},l.a.createElement(k.a,null),"Search")},l.a.createElement(S.a,{onChange:function(e){return m(e.target.value)},value:u})))}var qt=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(o.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{exact:!0,path:"/"},l.a.createElement(i.a,{to:"/genres"})),l.a.createElement(i.b,{exact:!0,path:"/sc"},l.a.createElement(Ft,{page:"Sc"})),l.a.createElement(i.b,{exact:!0,path:"/albums"},l.a.createElement(Ft,{page:"Albums"})),l.a.createElement(i.b,{exact:!0,path:"/artists"},l.a.createElement(Ft,{page:"Artists"})),l.a.createElement(i.b,{exact:!0,path:"/genres"},l.a.createElement(Ft,{page:"Genres"})),l.a.createElement(i.b,{exact:!0,path:"/filemanagement"},l.a.createElement(Ft,{page:"FileManagement"})),l.a.createElement(i.b,{exact:!0,path:"/setting"},l.a.createElement(Ft,{page:"Setting"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ut=a(515),Vt=function(){Object(gt.i)({iconComponent:Ut.a}),c.a.render(l.a.createElement(qt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))};window.cordova?document.addEventListener("deviceready",Vt,!1):Vt()},428:function(e,t,a){e.exports=a.p+"static/media/loading.d47e58c7.gif"},526:function(e,t,a){e.exports=a(1021)},531:function(e,t,a){},533:function(e,t,a){}},[[526,1,2]]]);
//# sourceMappingURL=main.25115ee6.chunk.js.map